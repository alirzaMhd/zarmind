<!-- Sales View (Partial) -->
<div class="container p-6" id="sales-root">
  <!-- Header -->
  <div class="page-header">
    <div class="page-title">
      <span>مدیریت فروش</span>
      <div class="breadcrumb">
        <a href="#/dashboard">خانه</a>
        <span class="sep"></span>
        <a href="#/sales">فروش</a>
      </div>
    </div>

    <div class="page-actions">
      <button class="btn ghost" id="sales-refresh" title="به‌روزرسانی">↻ به‌روزرسانی</button>
      <button class="btn" id="btn-sale-new">+ ثبت فروش جدید</button>
      <button class="btn ghost" id="btn-sales-report">گزارش فروش</button>
    </div>
  </div>

  <!-- Summary stats -->
  <div class="stat-grid" id="sales-stats">
    <div class="stat-card">
      <div class="label">درآمد امروز</div>
      <div class="value" id="stat-today-revenue">
        <div class="skeleton" style="height:28px;width:56%;"></div>
      </div>
      <div class="meta">جمع مبلغ فروش‌های امروز (تومان)</div>
    </div>
    <div class="stat-card">
      <div class="label">تعداد فروش امروز</div>
      <div class="value" id="stat-today-count">
        <div class="skeleton" style="height:28px;width:38%;"></div>
      </div>
      <div class="meta">سفارش‌های ثبت‌شده</div>
    </div>
    <div class="stat-card">
      <div class="label">درآمد ماه جاری</div>
      <div class="value" id="stat-month-revenue">
        <div class="skeleton" style="height:28px;width:62%;"></div>
      </div>
      <div class="meta">مجموع مبلغ نهایی در ماه</div>
    </div>
    <div class="stat-card">
      <div class="label">مبالغ معوق</div>
      <div class="value" id="stat-pending-amount">
        <div class="skeleton" style="height:28px;width:54%;"></div>
      </div>
      <div class="meta">جمع مانده فاکتورهای باز</div>
    </div>
  </div>

  <!-- Toolbar / Filters -->
  <div class="toolbar mt-6" id="sales-toolbar">
    <div class="field" style="min-width:220px;">
      <input id="filter-search" type="search" placeholder="جستجو در شماره، مشتری، توضیحات…" aria-label="جستجو" />
    </div>

    <div class="field">
      <input id="filter-customer" type="text" class="ltr" placeholder="شناسه/کد مشتری (اختیاری)" aria-label="مشتری" />
    </div>

    <div class="field">
      <input id="filter-start" type="date" class="ltr" aria-label="تاریخ شروع" />
    </div>

    <div class="field">
      <input id="filter-end" type="date" class="ltr" aria-label="تاریخ پایان" />
    </div>

    <select class="field" id="filter-status" aria-label="وضعیت">
      <option value="">همه وضعیت‌ها</option>
      <option value="draft">پیش‌فاکتور</option>
      <option value="completed">تکمیل‌شده</option>
      <option value="partial">پرداخت جزئی</option>
      <option value="cancelled">لغو‌شده</option>
      <option value="returned">مرجوعی</option>
    </select>

    <select class="field" id="filter-sale-type" aria-label="نوع فروش">
      <option value="">همه انواع</option>
      <option value="cash">نقدی</option>
      <option value="installment">اقساطی</option>
      <option value="exchange">معاوضه</option>
      <option value="repair">تعمیر</option>
    </select>

    <select class="field" id="filter-payment-method" aria-label="روش پرداخت">
      <option value="">همه روش‌ها</option>
      <option value="cash">نقد</option>
      <option value="card">کارت</option>
      <option value="transfer">انتقال</option>
      <option value="check">چک</option>
      <option value="mixed">ترکیبی</option>
    </select>

    <div class="btn-group">
      <button class="btn sm" id="btn-apply-filters">اعمال فیلتر</button>
      <button class="btn sm ghost" id="btn-reset-filters">پاک‌سازی</button>
    </div>

    <div style="margin-inline-start:auto; display:flex; gap:8px;">
      <button class="btn sm ghost" id="btn-export">خروجی</button>
      <a class="btn sm" href="#/reports">گزارش‌ها</a>
    </div>
  </div>

  <!-- Charts -->
  <div class="grid cols-2 mt-6" id="sales-charts">
    <div class="chart-card">
      <div class="flex items-center justify-between mb-3">
        <div class="text-md" style="font-weight:800;">روند فروش (۳۰ روز اخیر)</div>
        <div class="muted text-sm"><span class="ltr" id="chart-sales-period">—</span></div>
      </div>
      <div id="chart-sales-trend" data-chart="salesTrend" style="min-height:320px;">
        <div class="skeleton" style="height:320px;border-radius:8px;"></div>
      </div>
    </div>

    <div class="chart-card">
      <div class="flex items-center justify-between mb-3">
        <div class="text-md" style="font-weight:800;">روش‌های پرداخت</div>
        <div class="muted text-sm">ترکیب مبلغ در بازه</div>
      </div>
      <div id="chart-payment-methods" data-chart="paymentMethods" style="min-height:320px;">
        <div class="skeleton" style="height:320px;border-radius:8px;"></div>
      </div>
    </div>
  </div>

  <!-- Table -->
  <div class="table-wrapper mt-6" id="sales-table">
    <div class="table-toolbar">
      <div class="field" style="min-width:220px;">
        <input id="table-search" type="search" placeholder="جستجو در جدول…" aria-label="جستجو" />
      </div>
      <div style="margin-inline-start:auto; display:flex; gap:8px;">
        <select class="field" id="page-size" aria-label="تعداد در صفحه">
          <option value="10">۱۰</option>
          <option value="20" selected>۲۰</option>
          <option value="50">۵۰</option>
          <option value="100">۱۰۰</option>
        </select>
      </div>
    </div>

    <div class="table-scroll">
      <table class="data-table" aria-label="لیست فروش‌ها">
        <thead>
          <tr>
            <th>تاریخ</th>
            <th>شماره</th>
            <th>مشتری</th>
            <th class="num">آیتم</th>
            <th class="num">مبلغ نهایی</th>
            <th class="num">پرداخت‌شده</th>
            <th class="num">مانده</th>
            <th>روش پرداخت</th>
            <th>وضعیت</th>
            <th>عملیات</th>
          </tr>
        </thead>
        <tbody id="table-sales">
          <tr><td colspan="10">
            <div class="skeleton" style="height:220px;"></div>
          </td></tr>
        </tbody>
      </table>
    </div>

    <div class="pagination">
      <button class="page-btn" id="page-prev">‹</button>
      <button class="page-btn" id="page-next">›</button>
      <div class="page-info" id="page-info">—</div>
    </div>
  </div>

  <!-- Side lists -->
  <div class="grid cols-2 mt-6" id="sales-lists">
    <!-- Pending payments -->
    <div class="card">
      <div class="card-header">
        <div class="card-title">پرداخت‌های معوق</div>
        <a class="btn sm ghost" href="#/sales">مدیریت</a>
      </div>
      <div class="card-body">
        <div class="list" id="list-pending-payments">
          <div class="skeleton" style="height:18px;width:70%;"></div>
          <div class="skeleton" style="height:18px;width:58%;"></div>
          <div class="skeleton" style="height:18px;width:62%;"></div>
        </div>
      </div>
    </div>

    <!-- Recent sales -->
    <div class="card">
      <div class="card-header">
        <div class="card-title">آخرین فروش‌ها</div>
        <a class="btn sm ghost" href="#/sales">مشاهده همه</a>
      </div>
      <div class="card-body">
        <div class="table-scroll">
          <table class="data-table" aria-label="آخرین فروش‌ها">
            <thead>
              <tr>
                <th>تاریخ</th>
                <th>شماره</th>
                <th>مشتری</th>
                <th class="num">مبلغ</th>
                <th>وضعیت</th>
              </tr>
            </thead>
            <tbody id="table-recent-sales">
              <tr><td colspan="5">
                <div class="skeleton" style="height:160px;"></div>
              </td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Modals host -->
  <div id="modal-host" class="visually-hidden" aria-hidden="true"></div>
</div>